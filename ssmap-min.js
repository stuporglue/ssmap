window.ssmaps=window.ssmaps||[];window.ssmaps.push(new function(){var e=this;this.leafletLoaded=false;this.map;this.defaultOpts={lat:0,lon:0,div:"ssmap_"+Math.floor(Math.random()*5e3),h:"500px",w:"500px",z:1,tiles:"sat",mark:true};this.leafletJs="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js?2";this.leafletCss="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.css";this.makeMap=function(){if(typeof e.opts==="undefined"){this._setOpts()}var t=document.getElementById(e.opts.div);if(!t){var t=document.createElement("div");t.id=e.opts.div;t.class="ssmap";t.style.width=e.opts.w;t.style.height=e.opts.h;var n=document.getElementsByTagName("body")[0];n.appendChild(t)}if(!e.leafletLoaded){return e._loadLeaflet()}e.map=L.map(e.opts.div).setView([e.opts.lon,e.opts.lat],e.opts.z);(new L.TileLayer("//{s}.mqcdn.com/tiles/1.0.0/"+e.opts.tiles+"/{z}/{x}/{y}.png",{maxZoom:18,attribution:'Tiles from <a href="http://www.mapquest.com/" target="_blank">MapQuest</a>',subdomains:window.location.protocol=="https"?["otile1-s","otile2-s","otile3-s","otile4-s"]:["otile1","otile2","otile3","otile4"]})).addTo(e.map);if(e.opts.mark&&e.opts.lon!==0&&e.opts.lat!==0){(new L.Marker([e.opts.lon,e.opts.lat])).addTo(e.map)}return e.map};this._setOpts=function(){e.opts=e.opts||e.defaultOpts;var t=document.getElementsByTagName("body")[0].lastChild;if(t.tagName==="SCRIPT"&&t.src.indexOf("?")!==-1){var n;var r=t.src.replace(/.*\?/,"").split("&");for(var i=0;i<r.length;i++){n=r[i].split("=");if(typeof e.opts[n[0]]!=="undefined"){e.opts[n[0]]=n[1]}}}};this._loadLeaflet=function(){var t=document.getElementsByTagName("head")[0];if(typeof L==="undefined"){var n=document.createElement("link");n.rel="stylesheet";n.href=this.leafletCss;t.appendChild(n);var n=document.createElement("script");n.type="text/javascript";n.src=this.leafletJs;t.appendChild(n);this.readStateCheckInterval=setInterval(function(){if(document.readyState==="complete"){clearInterval(e.readStateCheckInterval);e.leafletLoaded=true;e.makeMap()}},10)}else{e.leafletLoaded=true;return this.makeMap()}};this.makeMap()})
